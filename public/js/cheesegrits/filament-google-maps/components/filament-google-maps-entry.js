function h({state:p,defaultLocation:g,controls:m,layers:l,defaultZoom:d,gmaps:y,mapEl:c,drawingField:w,geoJson:i,geoJsonField:L,geoJsonProperty:A,geoJsonVisible:u}){return{state:p,map:null,geocoder:null,marker:null,markerLocation:null,layers:null,symbols:{"%n":["street_number"],"%z":["postal_code"],"%S":["street_address","route"],"%A1":["administrative_area_level_1"],"%A2":["administrative_area_level_2"],"%A3":["administrative_area_level_3"],"%A4":["administrative_area_level_4"],"%A5":["administrative_area_level_5"],"%a1":["administrative_area_level_1"],"%a2":["administrative_area_level_2"],"%a3":["administrative_area_level_3"],"%a4":["administrative_area_level_4"],"%a5":["administrative_area_level_5"],"%L":["locality","postal_town"],"%D":["sublocality"],"%C":["country"],"%c":["country"],"%p":["premise"],"%P":["premise"]},drawingManager:null,overlays:[],dataLayer:null,geoJsonDataLayer:null,loadGMaps:function(){if(document.getElementById("filament-google-maps-google-maps-entry-js")){let e=function(t,a){window[t]?a():setTimeout(function(){e(t,a)},100)};e("filamentGoogleMapsAPILoaded",function(){this.createMap()}.bind(this))}else{let e=document.createElement("script");e.id="filament-google-maps-google-maps-entry-js",window.filamentGoogleMapsAsyncLoad=this.createMap.bind(this),e.src=y+"&callback=filamentGoogleMapsAsyncLoad",document.head.appendChild(e)}},init:function(){this.loadGMaps()},createMap:function(){window.filamentGoogleMapsAPILoaded=!0,this.map=new google.maps.Map(c,{center:this.getCoordinates(),zoom:d,...m}),this.marker=new google.maps.Marker({map:this.map}),this.marker.setPosition(this.getCoordinates()),l&&(this.layers=l.map(e=>{new google.maps.KmlLayer({url:e,map:this.map}).addListener("click",a=>{let r=a.featureData.description})})),i&&(u?this.geoJsonDataLayer=this.map.data:this.geoJsonDataLayer=new google.maps.Data,/^http/.test(i)?this.geoJsonDataLayer.loadGeoJson(i):this.geoJsonDataLayer.addGeoJson(JSON.parse(i)))},getCoordinates:function(){return(this.state===null||!this.state.hasOwnProperty("lat"))&&(this.state={lat:g.lat,lng:g.lng}),this.state},instanceOverlay:function(e){var t=null;switch(e.properties.type){case google.maps.drawing.OverlayType.MARKER:t=new google.maps.Marker({id:e.properties.id,type:e.properties.type,position:new google.maps.LatLng(e.geometry.coordinates[1],e.geometry.coordinates[0]),draggable:!0});break;case google.maps.drawing.OverlayType.RECTANGLE:var a=new google.maps.LatLng(e.geometry.coordinates[0][2][1],e.geometry.coordinates[0][2][0]),r=new google.maps.LatLng(e.geometry.coordinates[0][0][1],e.geometry.coordinates[0][0][0]);t=new google.maps.Rectangle(Object.assign({},this.polyOptions,{id:e.properties.id,type:e.properties.type,bounds:new google.maps.LatLngBounds(r,a),editable:!1}));break;case google.maps.drawing.OverlayType.POLYGON:t=new google.maps.Polygon(Object.assign({},this.polyOptions,{id:e.properties.id,type:e.properties.type,paths:this.transformToMVCArray(e.geometry.coordinates),editable:!1}));break;case google.maps.drawing.OverlayType.POLYLINE:t=new google.maps.Polyline({id:e.properties.id,type:e.properties.type,path:this.transformToMVCArray([e.geometry.coordinates]).getAt(0),draggable:!0,editable:!1});break;case google.maps.drawing.OverlayType.CIRCLE:t=new google.maps.Circle(Object.assign({},this.polyOptions,{id:e.properties.id,type:e.properties.type,center:new google.maps.LatLng(e.geometry.coordinates[1],e.geometry.coordinates[0]),radius:e.properties.radius,editable:!1}));break}return t},instanceFeature:function(e){var t=this.calculateGeometry(e);return this.dataLayer.add(new google.maps.Data.Feature({geometry:t.geometry,properties:Object.assign({id:this.guid(),type:e.type},t.hasOwnProperty("properties")?t.properties:{})}))},calculateGeometry:function(e,t){switch(e.type){case google.maps.drawing.OverlayType.MARKER:return t?new google.maps.Data.Point(e.getPosition()):{geometry:new google.maps.Data.Point(e.getPosition())};case google.maps.drawing.OverlayType.RECTANGLE:let a=e.getBounds(),r=[a.getSouthWest(),{lat:a.getSouthWest().lat(),lng:a.getNorthEast().lng()},a.getNorthEast(),{lng:a.getSouthWest().lng(),lat:a.getNorthEast().lat()}];return t?new google.maps.Data.Polygon([r]):{geometry:new google.maps.Data.Polygon([r])};case google.maps.drawing.OverlayType.POLYGON:return t?new google.maps.Data.Polygon([e.getPath().getArray()]):{geometry:new google.maps.Data.Polygon([e.getPath().getArray()])};case google.maps.drawing.OverlayType.POLYLINE:return t?new google.maps.Data.LineString(e.getPath().getArray()):{geometry:new google.maps.Data.LineString(e.getPath().getArray())};case google.maps.drawing.OverlayType.CIRCLE:return t?new google.maps.Data.Point(e.getCenter()):{properties:{radius:e.getRadius()},geometry:new google.maps.Data.Point(e.getCenter())}}},transformToMVCArray:function(e){let t=new google.maps.MVCArray;function a(o,n){o.length==2&&!Array.isArray(o[0])&&!Array.isArray(o[1])&&n.push(new google.maps.LatLng(o[1],o[0]));for(let s=0;s<o.length;s++)Array.isArray(o[s])&&a(o[s],n?o[s].length==2&&!Array.isArray(o[s][0])&&!Array.isArray(o[s][1])?n:n.getAt(n.push(new google.maps.MVCArray)-1):t.getAt(t.push(new google.maps.MVCArray)-1))}function r(o){return o instanceof google.maps.MVCArray}return a(e),t},loadFeaturesCollection:function(e){if(Array.isArray(e.features)&&e.features.length>0){let t=new google.maps.LatLngBounds;for(let a=0;a<e.features.length;a++){let r=this.instanceOverlay(e.features[a]);r.feature=this.instanceFeature(r),this.addOverlayEvents(r),r.feature.getGeometry().forEachLatLng(function(o){t.extend(o)}),r.setMap(this.map),this.overlays.push(r)}this.map.fitBounds(t)}},guid:function(){function e(){return Math.floor((1+Math.random())*65536).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}}}export{h as default};
